<!doctype html>
<html lang="en" data-framework="xaniajs">
<head>
    <meta charset="utf-8">
    <title>Xania JS • TodoMVC</title>
    <link rel="stylesheet" href="Content/css/base.css">
    <link rel="stylesheet" href="Content/css/index.css">
    <script src="src/core.js"></script>
    <script src="src/binder.js"></script>
    <script src="src/todomvc.js"></script>
    <script src="test/company.js"></script>
</head>
<body>
    <template id="todo-template">
        <section class="todoapp" data-for="store of app.todoStore">
            <header class="header">
                <h1>todos</h1>
                <input class="new-todo" placeholder="What needs to be done?" autofocus="" name="app.newTodoText" value="@app.newTodoText" keyup.enter="@app.addTodo()">
            </header>
            <section class="main" class.hidden="@store.todos.empty">
                <input class="toggle-all" type="checkbox" checked="@store.allCompleted()" click="@store.toggleAll()">
                <ul class="todo-list">
                    <li data-for="todo of app.todoStore.all()" class.completed="@todo.completed" class.editing="@todo.editing">
                        <div class="view">
                            <input class="toggle" type="checkbox" click="@todo.toggleCompletion()" checked="@todo.completed">
                            <label dblclick="editTodo(todo)">@todo.title</label>
                            <button class="destroy" click="@store.remove(todo)"></button>
                        </div>
                        <input class="edit" name="todo.title" blur="stopEditing(todo,editedtodo.value)" keyup.enter="updateEditingTodo(todo, editedtodo.value)" keyup.escape="cancelEditingTodo(todo)">
                    </li>
                </ul>
            </section>
            <footer class="footer" class.hidden="@store.todos.empty">
                <span class="todo-count"><strong>@store.getRemaining().length</strong> item(s) left</span>
                <ul class="filters">
                    <li><a href="#" class.selected="@store.showAll" click="@store.filter()">All</a></li>
                    <li><a href="#" class.selected="@store.showActive" click="@store.filter(false)" class="">Active</a></li>
                    <li><a href="#" class.selected="@store.showCompleted" click="@store.filter(true)" class="">Completed</a></li>
                </ul>
                <button class="clear-completed" class.hidden="@store.getCompleted().empty" click="@store.removeCompleted()">Clear completed</button>
            </footer>
        </section>
    </template>
    <footer class="info">
        <p>Double-click to edit a todo</p>
        <p>
            Created by <a href="http://github.com/ibrahimbensalah">Ibrahim ben Salah</a>
            using <a href="http://xania.io">Xania JS</a>
        </p>
        <p>
            Part of <a href="http://todomvc.com">TodoMVC</a>
        </p>
    </footer>

    <script>
        window.onload = function () {
            var content = document.getElementById("todo-template").content;
            var model = { app: new TodoApp(), router: new Router() };
            new Binder().bind(content, model);
        };
        window.onunload = function () {
            return false;
        }

        function debug() {
            var context = {
                a: Company.xania()
            };
            var observer = new Observer();
            var observable = observer.track(context);

            var result = {
                emp: observable.a.employees[0],
                x: { y: observable.a.employees[0] }
            };
            var unwrapped = Xania.unwrap(result);
        }
    </script>
</body>
</html>