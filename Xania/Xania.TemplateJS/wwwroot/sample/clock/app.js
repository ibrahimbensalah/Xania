"use strict";
var observables_1 = require("../../src/observables");
var loader_1 = require("../../src/loader");
var reactive_1 = require("../../src/reactive");
var ClockApp = (function () {
    function ClockApp() {
        this.time = new observables_1.Observables.Time();
    }
    ClockApp.getTime = function () {
        return new Date().getTime();
    };
    ClockApp.getSeconds = function (time) {
        var totalSec = Math.floor(time / 1000);
        return totalSec % 60;
    };
    ClockApp.secondsAngle = function (time) {
        var f = 4;
        return 360 * (Math.floor(time / (1000 / f)) % (60 * f)) / (60 * f);
    };
    ClockApp.minutesAngle = function (time) {
        var f = 10;
        return 360 * (Math.floor(time / (60000 / f)) % (60 * f)) / (60 * f);
    };
    ClockApp.hoursAngle = function (time) {
        var f = 12 * 60 * 60 * 1000;
        return 360 * (time % f) / f;
    };
    ClockApp.displayTime = function (time) {
        var totalSec = Math.floor(time / 1000);
        var frac = time % 1000;
        var sec = totalSec % 60;
        var totalMin = Math.floor(totalSec / 60) % 60;
        if (sec < 10)
            sec = "0" + sec;
        if (frac < 10)
            frac = frac + "00";
        if (frac < 100)
            frac = frac + "0";
        return totalMin + ":" + sec + "," + frac;
    };
    return ClockApp;
}());
function init(dom, count) {
    return loader_1.bind(dom).update(new reactive_1.Reactive.Store(new ClockApp(), {}));
}
exports.init = init;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYXBwLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vc2FtcGxlL2Nsb2NrL2FwcC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiO0FBQUEscURBQW1EO0FBQ25ELDJDQUF1QztBQUN2QywrQ0FBbUQ7QUFFbkQ7SUFBQTtRQUNJLFNBQUksR0FBRyxJQUFJLHlCQUFXLENBQUMsSUFBSSxFQUFFLENBQUM7SUE0Q2xDLENBQUM7SUExQ1UsZ0JBQU8sR0FBZDtRQUNJLE1BQU0sQ0FBQyxJQUFJLElBQUksRUFBRSxDQUFDLE9BQU8sRUFBRSxDQUFDO0lBQ2hDLENBQUM7SUFFTSxtQkFBVSxHQUFqQixVQUFrQixJQUFJO1FBQ2xCLElBQUksUUFBUSxHQUFHLElBQUksQ0FBQyxLQUFLLENBQUMsSUFBSSxHQUFHLElBQUksQ0FBQyxDQUFDO1FBQ3ZDLE1BQU0sQ0FBQyxRQUFRLEdBQUcsRUFBRSxDQUFDO0lBQ3pCLENBQUM7SUFFTSxxQkFBWSxHQUFuQixVQUFvQixJQUFJO1FBQ3BCLElBQUksQ0FBQyxHQUFHLENBQUMsQ0FBQztRQUNWLE1BQU0sQ0FBQyxHQUFHLEdBQUcsQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLElBQUksR0FBRyxDQUFDLElBQUksR0FBRyxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsRUFBRSxHQUFHLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxFQUFFLEdBQUcsQ0FBQyxDQUFDLENBQUM7SUFDdkUsQ0FBQztJQUVNLHFCQUFZLEdBQW5CLFVBQW9CLElBQUk7UUFDcEIsSUFBSSxDQUFDLEdBQUcsRUFBRSxDQUFDO1FBQ1gsTUFBTSxDQUFDLEdBQUcsR0FBRyxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsSUFBSSxHQUFHLENBQUMsS0FBSyxHQUFHLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxFQUFFLEdBQUcsQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLEVBQUUsR0FBRyxDQUFDLENBQUMsQ0FBQztJQUN4RSxDQUFDO0lBRU0sbUJBQVUsR0FBakIsVUFBa0IsSUFBSTtRQUNsQixJQUFJLENBQUMsR0FBRyxFQUFFLEdBQUcsRUFBRSxHQUFHLEVBQUUsR0FBRyxJQUFJLENBQUM7UUFDNUIsTUFBTSxDQUFDLEdBQUcsR0FBRyxDQUFDLElBQUksR0FBRyxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUM7SUFDaEMsQ0FBQztJQUVNLG9CQUFXLEdBQWxCLFVBQW1CLElBQUk7UUFDbkIsSUFBSSxRQUFRLEdBQUcsSUFBSSxDQUFDLEtBQUssQ0FBQyxJQUFJLEdBQUcsSUFBSSxDQUFDLENBQUM7UUFDdkMsSUFBSSxJQUFJLEdBQVEsSUFBSSxHQUFHLElBQUksQ0FBQztRQUM1QixJQUFJLEdBQUcsR0FBUSxRQUFRLEdBQUcsRUFBRSxDQUFDO1FBQzdCLElBQUksUUFBUSxHQUFHLElBQUksQ0FBQyxLQUFLLENBQUMsUUFBUSxHQUFHLEVBQUUsQ0FBQyxHQUFHLEVBQUUsQ0FBQztRQUU5QyxFQUFFLENBQUMsQ0FBQyxHQUFHLEdBQUcsRUFBRSxDQUFDO1lBQ1QsR0FBRyxHQUFHLEdBQUcsR0FBRyxHQUFHLENBQUM7UUFFcEIsRUFBRSxDQUFDLENBQUMsSUFBSSxHQUFHLEVBQUUsQ0FBQztZQUNWLElBQUksR0FBRyxJQUFJLEdBQUcsSUFBSSxDQUFDO1FBQ3ZCLEVBQUUsQ0FBQyxDQUFDLElBQUksR0FBRyxHQUFHLENBQUM7WUFDWCxJQUFJLEdBQUcsSUFBSSxHQUFHLEdBQUcsQ0FBQztRQUV0QixNQUFNLENBQUMsUUFBUSxHQUFHLEdBQUcsR0FBRyxHQUFHLEdBQUcsR0FBRyxHQUFHLElBQUksQ0FBQztJQUM3QyxDQUFDO0lBR0wsZUFBQztBQUFELENBQUMsQUE3Q0QsSUE2Q0M7QUFFRCxjQUFxQixHQUFHLEVBQUUsS0FBYTtJQUNuQyxNQUFNLENBQUMsYUFBSSxDQUFDLEdBQUcsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxJQUFJLG1CQUFFLENBQUMsS0FBSyxDQUFDLElBQUksUUFBUSxFQUFFLEVBQUUsRUFBRSxDQUFDLENBQUMsQ0FBQztBQUM5RCxDQUFDO0FBRkQsb0JBRUMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBPYnNlcnZhYmxlcyB9IGZyb20gXCIuLi8uLi9zcmMvb2JzZXJ2YWJsZXNcIlxyXG5pbXBvcnQgeyBiaW5kIH0gZnJvbSBcIi4uLy4uL3NyYy9sb2FkZXJcIlxyXG5pbXBvcnQgeyBSZWFjdGl2ZSBhcyBSZSB9IGZyb20gJy4uLy4uL3NyYy9yZWFjdGl2ZSdcclxuXHJcbmNsYXNzIENsb2NrQXBwIHtcclxuICAgIHRpbWUgPSBuZXcgT2JzZXJ2YWJsZXMuVGltZSgpO1xyXG5cclxuICAgIHN0YXRpYyBnZXRUaW1lKCkge1xyXG4gICAgICAgIHJldHVybiBuZXcgRGF0ZSgpLmdldFRpbWUoKTtcclxuICAgIH1cclxuXHJcbiAgICBzdGF0aWMgZ2V0U2Vjb25kcyh0aW1lKSB7XHJcbiAgICAgICAgdmFyIHRvdGFsU2VjID0gTWF0aC5mbG9vcih0aW1lIC8gMTAwMCk7XHJcbiAgICAgICAgcmV0dXJuIHRvdGFsU2VjICUgNjA7XHJcbiAgICB9XHJcblxyXG4gICAgc3RhdGljIHNlY29uZHNBbmdsZSh0aW1lKSB7XHJcbiAgICAgICAgdmFyIGYgPSA0O1xyXG4gICAgICAgIHJldHVybiAzNjAgKiAoTWF0aC5mbG9vcih0aW1lIC8gKDEwMDAgLyBmKSkgJSAoNjAgKiBmKSkgLyAoNjAgKiBmKTtcclxuICAgIH1cclxuXHJcbiAgICBzdGF0aWMgbWludXRlc0FuZ2xlKHRpbWUpIHtcclxuICAgICAgICB2YXIgZiA9IDEwO1xyXG4gICAgICAgIHJldHVybiAzNjAgKiAoTWF0aC5mbG9vcih0aW1lIC8gKDYwMDAwIC8gZikpICUgKDYwICogZikpIC8gKDYwICogZik7XHJcbiAgICB9XHJcblxyXG4gICAgc3RhdGljIGhvdXJzQW5nbGUodGltZSkge1xyXG4gICAgICAgIHZhciBmID0gMTIgKiA2MCAqIDYwICogMTAwMDtcclxuICAgICAgICByZXR1cm4gMzYwICogKHRpbWUgJSBmKSAvIGY7XHJcbiAgICB9XHJcblxyXG4gICAgc3RhdGljIGRpc3BsYXlUaW1lKHRpbWUpIHtcclxuICAgICAgICB2YXIgdG90YWxTZWMgPSBNYXRoLmZsb29yKHRpbWUgLyAxMDAwKTtcclxuICAgICAgICB2YXIgZnJhYzogYW55ID0gdGltZSAlIDEwMDA7XHJcbiAgICAgICAgdmFyIHNlYzogYW55ID0gdG90YWxTZWMgJSA2MDtcclxuICAgICAgICB2YXIgdG90YWxNaW4gPSBNYXRoLmZsb29yKHRvdGFsU2VjIC8gNjApICUgNjA7XHJcblxyXG4gICAgICAgIGlmIChzZWMgPCAxMClcclxuICAgICAgICAgICAgc2VjID0gXCIwXCIgKyBzZWM7XHJcblxyXG4gICAgICAgIGlmIChmcmFjIDwgMTApXHJcbiAgICAgICAgICAgIGZyYWMgPSBmcmFjICsgXCIwMFwiO1xyXG4gICAgICAgIGlmIChmcmFjIDwgMTAwKVxyXG4gICAgICAgICAgICBmcmFjID0gZnJhYyArIFwiMFwiO1xyXG5cclxuICAgICAgICByZXR1cm4gdG90YWxNaW4gKyBcIjpcIiArIHNlYyArIFwiLFwiICsgZnJhYztcclxuICAgIH1cclxuXHJcbiAgICAvLyBzdGF0aWMgbWFwKGZvcm1hdDogKHRpbWU6IGFueSkgPT4gc3RyaW5nKSB7IHRocm93IG5ldyBFcnJvcihcIk5vdCBpbXBsZW1lbnRlZFwiKTsgfVxyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gaW5pdChkb20sIGNvdW50OiBudW1iZXIpIHtcclxuICAgIHJldHVybiBiaW5kKGRvbSkudXBkYXRlKG5ldyBSZS5TdG9yZShuZXcgQ2xvY2tBcHAoKSwge30pKTtcclxufSJdfQ==