"use strict";
var observables_1 = require("../../src/observables");
var loader_1 = require("../../src/loader");
var reactive_1 = require("../../src/reactive");
var ClockApp = (function () {
    function ClockApp() {
        this.timer = new observables_1.Observables.Timer();
        this.seconds = this.timer.map(ClockApp.getSeconds);
    }
    ClockApp.getSeconds = function (time) {
        var totalSec = Math.floor(time / 1000);
        return totalSec % 60;
    };
    ClockApp.getAngle = function (time) {
        return 360 * ClockApp.getSeconds(time) / 60;
    };
    ClockApp.displayTime = function (time) {
        var totalSec = Math.floor(time / 1000);
        var frac = time % 1000;
        var sec = totalSec % 60;
        var totalMin = Math.floor(totalSec / 60);
        return totalMin + ":" + sec + "," + frac;
    };
    return ClockApp;
}());
function init(dom, count) {
    return loader_1.bind(dom).update(new reactive_1.Reactive.Store(new ClockApp(), {}));
}
exports.init = init;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYXBwLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vc2FtcGxlL2Nsb2NrL2FwcC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiO0FBQUEscURBQW1EO0FBQ25ELDJDQUF1QztBQUN2QywrQ0FBbUQ7QUFFbkQ7SUFBQTtRQUNXLFVBQUssR0FBRyxJQUFJLHlCQUFXLENBQUMsS0FBSyxFQUFFLENBQUM7UUFDaEMsWUFBTyxHQUFHLElBQUksQ0FBQyxLQUFLLENBQUMsR0FBRyxDQUFDLFFBQVEsQ0FBQyxVQUFVLENBQUMsQ0FBQztJQXFCekQsQ0FBQztJQW5CVSxtQkFBVSxHQUFqQixVQUFrQixJQUFJO1FBQ2xCLElBQUksUUFBUSxHQUFHLElBQUksQ0FBQyxLQUFLLENBQUMsSUFBSSxHQUFHLElBQUksQ0FBQyxDQUFDO1FBQ3ZDLE1BQU0sQ0FBQyxRQUFRLEdBQUcsRUFBRSxDQUFDO0lBQ3pCLENBQUM7SUFFTSxpQkFBUSxHQUFmLFVBQWdCLElBQUk7UUFDaEIsTUFBTSxDQUFDLEdBQUcsR0FBRyxRQUFRLENBQUMsVUFBVSxDQUFDLElBQUksQ0FBQyxHQUFHLEVBQUUsQ0FBQztJQUNoRCxDQUFDO0lBRU0sb0JBQVcsR0FBbEIsVUFBbUIsSUFBSTtRQUNuQixJQUFJLFFBQVEsR0FBRyxJQUFJLENBQUMsS0FBSyxDQUFDLElBQUksR0FBRyxJQUFJLENBQUMsQ0FBQztRQUN2QyxJQUFJLElBQUksR0FBRyxJQUFJLEdBQUcsSUFBSSxDQUFDO1FBQ3ZCLElBQUksR0FBRyxHQUFHLFFBQVEsR0FBRyxFQUFFLENBQUM7UUFDeEIsSUFBSSxRQUFRLEdBQUcsSUFBSSxDQUFDLEtBQUssQ0FBQyxRQUFRLEdBQUcsRUFBRSxDQUFDLENBQUM7UUFFekMsTUFBTSxDQUFDLFFBQVEsR0FBRyxHQUFHLEdBQUcsR0FBRyxHQUFHLEdBQUcsR0FBRyxJQUFJLENBQUM7SUFDN0MsQ0FBQztJQUdMLGVBQUM7QUFBRCxDQUFDLEFBdkJELElBdUJDO0FBRUQsY0FBcUIsR0FBRyxFQUFFLEtBQWE7SUFDbkMsTUFBTSxDQUFDLGFBQUksQ0FBQyxHQUFHLENBQUMsQ0FBQyxNQUFNLENBQUMsSUFBSSxtQkFBRSxDQUFDLEtBQUssQ0FBQyxJQUFJLFFBQVEsRUFBRSxFQUFFLEVBQUUsQ0FBQyxDQUFDLENBQUM7QUFDOUQsQ0FBQztBQUZELG9CQUVDIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgT2JzZXJ2YWJsZXMgfSBmcm9tIFwiLi4vLi4vc3JjL29ic2VydmFibGVzXCJcclxuaW1wb3J0IHsgYmluZCB9IGZyb20gXCIuLi8uLi9zcmMvbG9hZGVyXCJcclxuaW1wb3J0IHsgUmVhY3RpdmUgYXMgUmUgfSBmcm9tICcuLi8uLi9zcmMvcmVhY3RpdmUnXHJcblxyXG5jbGFzcyBDbG9ja0FwcCB7XHJcbiAgICBwdWJsaWMgdGltZXIgPSBuZXcgT2JzZXJ2YWJsZXMuVGltZXIoKTtcclxuICAgIHB1YmxpYyBzZWNvbmRzID0gdGhpcy50aW1lci5tYXAoQ2xvY2tBcHAuZ2V0U2Vjb25kcyk7XHJcblxyXG4gICAgc3RhdGljIGdldFNlY29uZHModGltZSkge1xyXG4gICAgICAgIHZhciB0b3RhbFNlYyA9IE1hdGguZmxvb3IodGltZSAvIDEwMDApO1xyXG4gICAgICAgIHJldHVybiB0b3RhbFNlYyAlIDYwO1xyXG4gICAgfVxyXG5cclxuICAgIHN0YXRpYyBnZXRBbmdsZSh0aW1lKSB7XHJcbiAgICAgICAgcmV0dXJuIDM2MCAqIENsb2NrQXBwLmdldFNlY29uZHModGltZSkgLyA2MDtcclxuICAgIH1cclxuXHJcbiAgICBzdGF0aWMgZGlzcGxheVRpbWUodGltZSkge1xyXG4gICAgICAgIHZhciB0b3RhbFNlYyA9IE1hdGguZmxvb3IodGltZSAvIDEwMDApO1xyXG4gICAgICAgIHZhciBmcmFjID0gdGltZSAlIDEwMDA7XHJcbiAgICAgICAgdmFyIHNlYyA9IHRvdGFsU2VjICUgNjA7XHJcbiAgICAgICAgdmFyIHRvdGFsTWluID0gTWF0aC5mbG9vcih0b3RhbFNlYyAvIDYwKTtcclxuXHJcbiAgICAgICAgcmV0dXJuIHRvdGFsTWluICsgXCI6XCIgKyBzZWMgKyBcIixcIiArIGZyYWM7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gc3RhdGljIG1hcChmb3JtYXQ6ICh0aW1lOiBhbnkpID0+IHN0cmluZykgeyB0aHJvdyBuZXcgRXJyb3IoXCJOb3QgaW1wbGVtZW50ZWRcIik7IH1cclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGluaXQoZG9tLCBjb3VudDogbnVtYmVyKSB7XHJcbiAgICByZXR1cm4gYmluZChkb20pLnVwZGF0ZShuZXcgUmUuU3RvcmUobmV3IENsb2NrQXBwKCksIHt9KSk7XHJcbn0iXX0=