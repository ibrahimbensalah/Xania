"use strict";
var observables_1 = require("../../src/observables");
var xania_1 = require("../../src/xania");
require("../clock/app.css");
var ClockApp = (function () {
    function ClockApp() {
        this.time = new observables_1.Observables.Time();
    }
    ClockApp.secondsAngle = function (time) {
        var f = 4;
        return 360 * (Math.floor(time / (1000 / f)) % (60 * f)) / (60 * f);
    };
    ClockApp.minutesAngle = function (time) {
        var f = 60 * 60 * 1000;
        return 360 * (time % f) / f;
    };
    ClockApp.hoursAngle = function (time) {
        var f = 12 * 60 * 60 * 1000;
        return 360 * (time % f) / f;
    };
    ClockApp.prototype.view = function (xania) {
        return (xania.tag("div", { style: "height: 200px;" },
            xania.tag("svg", { viewBox: "0 0 200 200" },
                xania.tag("g", { transform: "scale(2) translate(50,50)" },
                    xania.tag("circle", { className: "clock-face", r: "35" }),
                    xania.tag(xania_1.ForEach, { expr: xania_1.fs("for p in [ 0..59 ]") },
                        xania.tag("line", { className: "minor", y1: "42", y2: "45", transform: ["rotate(", xania_1.fs("p * 6"), ")"] })),
                    xania.tag(xania_1.ForEach, { expr: xania_1.fs("for p in [ 0..11 ]") },
                        xania.tag("line", { className: "major", y1: "35", y2: "45", transform: ["rotate(", xania_1.fs("p * 30"), ")"] })),
                    xania.tag("line", { className: "hour", y1: "2", y2: "-20", transform: ["rotate(", xania_1.fs("hoursAngle (await time)"), ")"] }),
                    xania.tag("line", { className: "minute", y1: "4", y2: "-30", transform: ["rotate(", xania_1.fs("minutesAngle (await time)"), ")"] }),
                    xania.tag("g", { transform: ["rotate(", xania_1.fs("secondsAngle (await time)"), ")"] },
                        xania.tag("line", { className: "second", y1: "10", y2: "-38" }),
                        xania.tag("line", { className: "second-counterweight", y1: "10", y2: "2" }))))));
    };
    return ClockApp;
}());
exports.ClockApp = ClockApp;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiY2xvY2suanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyJjbG9jay50c3giXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IjtBQUFBLHFEQUFtRDtBQUNuRCx5Q0FBNkM7QUFDN0MsNEJBQXlCO0FBRXpCO0lBQUE7UUFDSSxTQUFJLEdBQUcsSUFBSSx5QkFBVyxDQUFDLElBQUksRUFBRSxDQUFDO0lBd0NsQyxDQUFDO0lBdENVLHFCQUFZLEdBQW5CLFVBQW9CLElBQUk7UUFDcEIsSUFBSSxDQUFDLEdBQUcsQ0FBQyxDQUFDO1FBQ1YsTUFBTSxDQUFDLEdBQUcsR0FBRyxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsSUFBSSxHQUFHLENBQUMsSUFBSSxHQUFHLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxFQUFFLEdBQUcsQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLEVBQUUsR0FBRyxDQUFDLENBQUMsQ0FBQztJQUN2RSxDQUFDO0lBRU0scUJBQVksR0FBbkIsVUFBb0IsSUFBSTtRQUNwQixJQUFJLENBQUMsR0FBRyxFQUFFLEdBQUcsRUFBRSxHQUFHLElBQUksQ0FBQztRQUN2QixNQUFNLENBQUMsR0FBRyxHQUFHLENBQUMsSUFBSSxHQUFHLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQztJQUNoQyxDQUFDO0lBRU0sbUJBQVUsR0FBakIsVUFBa0IsSUFBSTtRQUNsQixJQUFJLENBQUMsR0FBRyxFQUFFLEdBQUcsRUFBRSxHQUFHLEVBQUUsR0FBRyxJQUFJLENBQUM7UUFDNUIsTUFBTSxDQUFDLEdBQUcsR0FBRyxDQUFDLElBQUksR0FBRyxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUM7SUFDaEMsQ0FBQztJQUVELHVCQUFJLEdBQUosVUFBSyxLQUFLO1FBQ04sTUFBTSxDQUFDLENBQ0gsbUJBQUssS0FBSyxFQUFDLGdCQUFnQjtZQUN2QixtQkFBSyxPQUFPLEVBQUMsYUFBYTtnQkFDdEIsaUJBQUcsU0FBUyxFQUFDLDJCQUEyQjtvQkFDcEMsc0JBQVEsU0FBUyxFQUFDLFlBQVksRUFBQyxDQUFDLEVBQUMsSUFBSSxHQUFVO29CQUMvQyxVQUFDLGVBQU8sSUFBQyxJQUFJLEVBQUUsVUFBRSxDQUFDLG9CQUFvQixDQUFDO3dCQUNuQyxvQkFBTSxTQUFTLEVBQUMsT0FBTyxFQUFDLEVBQUUsRUFBQyxJQUFJLEVBQUMsRUFBRSxFQUFDLElBQUksRUFBQyxTQUFTLEVBQUUsQ0FBQyxTQUFTLEVBQUUsVUFBRSxDQUFDLE9BQU8sQ0FBQyxFQUFFLEdBQUcsQ0FBQyxHQUFJLENBQzlFO29CQUNWLFVBQUMsZUFBTyxJQUFDLElBQUksRUFBRSxVQUFFLENBQUMsb0JBQW9CLENBQUM7d0JBQ25DLG9CQUFNLFNBQVMsRUFBQyxPQUFPLEVBQUMsRUFBRSxFQUFDLElBQUksRUFBQyxFQUFFLEVBQUMsSUFBSSxFQUFDLFNBQVMsRUFBRSxDQUFDLFNBQVMsRUFBRSxVQUFFLENBQUMsUUFBUSxDQUFDLEVBQUUsR0FBRyxDQUFDLEdBQUksQ0FDL0U7b0JBQ1Ysb0JBQU0sU0FBUyxFQUFDLE1BQU0sRUFBQyxFQUFFLEVBQUMsR0FBRyxFQUFDLEVBQUUsRUFBQyxLQUFLLEVBQUMsU0FBUyxFQUFFLENBQUMsU0FBUyxFQUFFLFVBQUUsQ0FBQyx5QkFBeUIsQ0FBQyxFQUFFLEdBQUcsQ0FBQyxHQUFJO29CQUNyRyxvQkFBTSxTQUFTLEVBQUMsUUFBUSxFQUFDLEVBQUUsRUFBQyxHQUFHLEVBQUMsRUFBRSxFQUFDLEtBQUssRUFBQyxTQUFTLEVBQUUsQ0FBQyxTQUFTLEVBQUUsVUFBRSxDQUFDLDJCQUEyQixDQUFDLEVBQUUsR0FBRyxDQUFDLEdBQUk7b0JBQ3pHLGlCQUFHLFNBQVMsRUFBRSxDQUFDLFNBQVMsRUFBRSxVQUFFLENBQUMsMkJBQTJCLENBQUMsRUFBRSxHQUFHLENBQUM7d0JBQzNELG9CQUFNLFNBQVMsRUFBQyxRQUFRLEVBQUMsRUFBRSxFQUFDLElBQUksRUFBQyxFQUFFLEVBQUMsS0FBSyxHQUFRO3dCQUNqRCxvQkFBTSxTQUFTLEVBQUMsc0JBQXNCLEVBQUMsRUFBRSxFQUFDLElBQUksRUFBQyxFQUFFLEVBQUMsR0FBRyxHQUFRLENBQzdELENBQ0osQ0FDRixDQUNKLENBQ1QsQ0FBQztJQUNOLENBQUM7SUFDTCxlQUFDO0FBQUQsQ0FBQyxBQXpDRCxJQXlDQztBQXpDWSw0QkFBUSIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IE9ic2VydmFibGVzIH0gZnJvbSBcIi4uLy4uL3NyYy9vYnNlcnZhYmxlc1wiXHJcbmltcG9ydCB7IEZvckVhY2gsIGZzIH0gZnJvbSBcIi4uLy4uL3NyYy94YW5pYVwiXHJcbmltcG9ydCAnLi4vY2xvY2svYXBwLmNzcydcclxuXHJcbmV4cG9ydCBjbGFzcyBDbG9ja0FwcCB7XHJcbiAgICB0aW1lID0gbmV3IE9ic2VydmFibGVzLlRpbWUoKTtcclxuXHJcbiAgICBzdGF0aWMgc2Vjb25kc0FuZ2xlKHRpbWUpIHtcclxuICAgICAgICB2YXIgZiA9IDQ7XHJcbiAgICAgICAgcmV0dXJuIDM2MCAqIChNYXRoLmZsb29yKHRpbWUgLyAoMTAwMCAvIGYpKSAlICg2MCAqIGYpKSAvICg2MCAqIGYpO1xyXG4gICAgfVxyXG5cclxuICAgIHN0YXRpYyBtaW51dGVzQW5nbGUodGltZSkge1xyXG4gICAgICAgIHZhciBmID0gNjAgKiA2MCAqIDEwMDA7XHJcbiAgICAgICAgcmV0dXJuIDM2MCAqICh0aW1lICUgZikgLyBmO1xyXG4gICAgfVxyXG5cclxuICAgIHN0YXRpYyBob3Vyc0FuZ2xlKHRpbWUpIHtcclxuICAgICAgICB2YXIgZiA9IDEyICogNjAgKiA2MCAqIDEwMDA7XHJcbiAgICAgICAgcmV0dXJuIDM2MCAqICh0aW1lICUgZikgLyBmO1xyXG4gICAgfVxyXG5cclxuICAgIHZpZXcoeGFuaWEpIHtcclxuICAgICAgICByZXR1cm4gKFxyXG4gICAgICAgICAgICA8ZGl2IHN0eWxlPVwiaGVpZ2h0OiAyMDBweDtcIj5cclxuICAgICAgICAgICAgICAgIDxzdmcgdmlld0JveD1cIjAgMCAyMDAgMjAwXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgPGcgdHJhbnNmb3JtPVwic2NhbGUoMikgdHJhbnNsYXRlKDUwLDUwKVwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8Y2lyY2xlIGNsYXNzTmFtZT1cImNsb2NrLWZhY2VcIiByPVwiMzVcIj48L2NpcmNsZT5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPEZvckVhY2ggZXhwcj17ZnMoXCJmb3IgcCBpbiBbIDAuLjU5IF1cIil9PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGxpbmUgY2xhc3NOYW1lPVwibWlub3JcIiB5MT1cIjQyXCIgeTI9XCI0NVwiIHRyYW5zZm9ybT17W1wicm90YXRlKFwiLCBmcyhcInAgKiA2XCIpLCBcIilcIl19IC8+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDwvRm9yRWFjaD5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPEZvckVhY2ggZXhwcj17ZnMoXCJmb3IgcCBpbiBbIDAuLjExIF1cIil9PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGxpbmUgY2xhc3NOYW1lPVwibWFqb3JcIiB5MT1cIjM1XCIgeTI9XCI0NVwiIHRyYW5zZm9ybT17W1wicm90YXRlKFwiLCBmcyhcInAgKiAzMFwiKSwgXCIpXCJdfSAvPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8L0ZvckVhY2g+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDxsaW5lIGNsYXNzTmFtZT1cImhvdXJcIiB5MT1cIjJcIiB5Mj1cIi0yMFwiIHRyYW5zZm9ybT17W1wicm90YXRlKFwiLCBmcyhcImhvdXJzQW5nbGUgKGF3YWl0IHRpbWUpXCIpLCBcIilcIl19IC8+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDxsaW5lIGNsYXNzTmFtZT1cIm1pbnV0ZVwiIHkxPVwiNFwiIHkyPVwiLTMwXCIgdHJhbnNmb3JtPXtbXCJyb3RhdGUoXCIsIGZzKFwibWludXRlc0FuZ2xlIChhd2FpdCB0aW1lKVwiKSwgXCIpXCJdfSAvPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8ZyB0cmFuc2Zvcm09e1tcInJvdGF0ZShcIiwgZnMoXCJzZWNvbmRzQW5nbGUgKGF3YWl0IHRpbWUpXCIpLCBcIilcIl19PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGxpbmUgY2xhc3NOYW1lPVwic2Vjb25kXCIgeTE9XCIxMFwiIHkyPVwiLTM4XCI+PC9saW5lPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGxpbmUgY2xhc3NOYW1lPVwic2Vjb25kLWNvdW50ZXJ3ZWlnaHRcIiB5MT1cIjEwXCIgeTI9XCIyXCI+PC9saW5lPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8L2c+XHJcbiAgICAgICAgICAgICAgICAgICAgPC9nPlxyXG4gICAgICAgICAgICAgICAgPC9zdmc+XHJcbiAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICk7XHJcbiAgICB9XHJcbn1cclxuXHJcbiJdfQ==