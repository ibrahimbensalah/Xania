<!doctype html>
<html lang="en" data-framework="angular2">
<head>
    <meta charset="utf-8">
    <title>Xania JS • TodoMVC</title>
    <link rel="stylesheet" href="css/base.css">
    <link rel="stylesheet" href="css/index.css">
    <script src="../src/core.js"></script>
    <script src="../src/binder.js"></script>
    <script src="../src/todomvc.js"></script>
    <style type="text/css">
        #todo-template { display: none; }
    </style>
</head>
<body>
    <div id="todo-template">
        <section class="todoapp">
            <header class="header">
                <h1>todos</h1>
                <input class="new-todo" placeholder="What needs to be done?" autofocus="" name="app.newTodoText" value="@app.newTodoText"keyup.enter="app.addTodo()">
            </header>
            <section class="main" display.if="app.todoStore.todos.length > 0">
                <input class="toggle-all" type="checkbox" checked="@app.todoStore.allCompleted()" click="app.todoStore.toggleAll()">
                <ul class="todo-list">
                    <li data-for="todo of app.todoStore.todos" class.completed="@todo.completed" class.editing="@todo.editing">
                        <div class="view">
                            <input class="toggle" type="checkbox" click="todo.toggleCompletion()" checked="@todo.completed">
                            <label dblclick="editTodo(todo)">@todo.title</label>
                            <button class="destroy" click="remove(todo)"></button>
                        </div>
                        <input class="edit" name="todo.title" blur="stopEditing(todo,editedtodo.value)" keyup.enter="updateEditingTodo(todo, editedtodo.value)" keyup.escape="cancelEditingTodo(todo)">
                    </li>
                </ul>
            </section>
            <footer class="footer" class.hidden="@app.todoStore.todos.empty">
                <span class="todo-count"><strong>@app.todoStore.getRemaining().length</strong> item(s) left</span>
                <button class="clear-completed" class.hidden="@app.todoStore.getCompleted().empty" click="removeCompleted()">Clear completed</button>
            </footer>
        </section>
    </div>
    <footer class="info">
        <p>Double-click to edit a todo</p>
        <p>
            Created by <a href="http://github.com/ibrahimbensalah">Ibrahim ben Salah</a>
            using <a href="http://xania.io">Xania JS</a>
        </p>
        <p>
            Part of <a href="http://todomvc.com">TodoMVC</a>
        </p>
    </footer>
    <script>
        window.onload = function () {
            var binder = new Binder();
            var tpl = document.getElementById("todo-template");
            binder.bind(tpl.childNodes[1], { app: new TodoApp() });
        };

        //var model = { app: new TodoApp() };
        //var observer = new Observer();
        //observer.subscribe(model, function (ctx) {
        //    console.log("update", arguments);
        //    var result = ctx.app.todoStore.getCompleted().empty;
        //    console.log(result);
        //});

        //var tracker = observer.track(model);
        //tracker.app.todoStore.todos.push(new Todo("xxxx"));

        //observer.update();
    </script>
</body>
</html>